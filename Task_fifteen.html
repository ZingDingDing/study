<!DOCTYPE>
<html>

<head>
    <meta charset="utf-8">
    <title>task15</title>
    <style type="text/css">
    * {font: "微软雅黑";}
    </style>
</head>
<body>
   <ul id="source">
     <li>北京空气质量:<b>90</b></li>
     <li>上海空气质量:<b>70</b></li>
     <li>天津空气质量:<b>80</b></li>
     <li>广州空气质量:<b>50</b></li>
     <li>深圳空气质量:<b>40</b></li>
     <li>福州空气质量:<b>32</b></li>
     <li>成都空气质量:<b>90</b></li>
   </ul>
   <ul id="resort">
   
   </ul>
   <button id="sort-btn">排序 </button>
   <script type="text/javascript">
   /*
    *getData方法
	*读取id为source的列表，获取其中城市名字以及城市相对应的空气质量
	*返回一个数组，格式见函数中示例
   */
   function getData(){
	   var ul = document.getElementById("source");
	   var data = [];
	   for (var i = 0;i < ul.childElementCount;i++){
		   var li = ul.children[i];
		   var strCity = li.innerHTML.split("空气质量:")[0];
		   var num = Number(li.children[0].innerHTML);
		   data.push([strCity,num]);
		   }
		return data;
	   }
	  /**
	  *sortAqiData
	  *按空气质量对data进行从小到大的排序
	  *返回一个排序后的数组
	**/ 
	function sortAqiData(data){
		data.sort(function(a,b){
			   return a[1]-b[1];
			})
			return data;
		}
	 
	/**
	  *render
	  *将排序好的城市以及空气质量指数，输出显示到id位置resort列表中
	  *格式见ul注释部分
	**/
	function render(data){
		var ul = document.getElementById("resort");
		var items = "";
		for (var i=0;i<data.length;i++){
			var aqiData = data[i];
			items +='<li>第' + (i + 1)+ '名' + aqiData[0] + '空气质量: <b>' + aqiData[1] + '</b></li>'
			
						}
		ul.innerHTML = items;
		}
	function btnHandle(){
		var aqiData = getData();
		aqiData = sortAqiData(aqiData);
		render(aqiData);
		var btn = document.getElementById("sort-btn");
		
			}
	function init(){
		var btn = document.getElementById("sort-btn");
		btn.onclick = btnHandle;
		}
    init();
   </script>
</body>
</html>